<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Courses</title>
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.0.0-2/css/bootstrap.min.css} "/>
</head>
<body>

<div th:insert="components/navbar :: navbar"/>

<div class="container p-3">
    <form action="/" method="get">
        <div class="">
            <div class="input-group p-1">
                <span class="input-group-text">Course :</span>

                <input type="radio" class="btn-check" name="sortType" id="success-outlined" autocomplete="off"
                       checked hidden/>


                <div onclick="() => {}">
                    <input id="asc" type="radio" name="sortType" th:value="ASC" th:checked="${sortType == 'ASC'}" hidden/>
                    <label for="asc" id="ascl" th:class="${classes.get(0)}" onclick="setASC()">ASC</label><br>
                </div>

                <div>
                    <input id="desc" type="radio" name="sortType" th:value="DESC" th:checked="${sortType == 'DESC'}" hidden/>
                    <label for="desc" id="descl" th:class="${classes.get(1)}" onclick="setDESC()">DESC</label><br>
                </div>

                <input class="form-control" aria-label="With textarea" type="text" name="courseName"
                       placeholder="Назва дисципліни">
            </div>

            <div class="input-group p-1">
                <span class="input-group-text">Duration :</span>
                <input class="form-control" aria-label="With textarea" type="number" name="duration"
                       placeholder="Тривалість">
            </div>
            <div class="input-group p-1">
                <span class="input-group-text">Capacity :</span>
                <input class="form-control" aria-label="With textarea" type="number" name="capacity"
                       placeholder="Кількість студентів">
            </div>
            <div class="input-group p-1">
                <span class="input-group-text">Topic :</span>
                <input class="form-control" aria-label="With textarea" type="text" name="topic" placeholder="Топік">
            </div>
            <div class="input-group p-1">
                <span class="input-group-text">Teacher :</span>
                <input class="form-control" aria-label="With textarea" type="text" name="teacher"
                       placeholder="ПІБ викладача">
            </div>
        </div>
        <button type="submit" class="btn btn-primary btn-lg btn-block">Filter</button>
    </form>

    <div class="col-lg-10 mt-5 mb-5">
        <table class="table table-bordered table-responsive-sm">
            <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Description</th>
                <th>Capacity</th>
                <th>Semester</th>
                <th>Duration</th>
                <th>Teacher</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="course : ${courses.page}">
                <td th:text="${course.getId()}">id</td>
                <td><a th:href="@{//{id} (id=${course.getId})}" th:text="${course.getName()}"/></td>
                <td th:text="${course.getDescription()}"/>
                <td th:text="${course.getCapacity()}"/>
                <td th:text="${course.getSemesterStart()}"/>
                <td th:text="${course.getSemesterDuration()}"/>
                <td th:text="${course.getTeacher().getLastName()} + ' ' + ${course.getTeacher().getFirstName().charAt(0)} + '.' + ${course.getTeacher().getSecondName().charAt(0)} + '.' "/>
            </tr>
            </tbody>
        </table>

        <nav aria-label="Page navigation" class="paging">
            <ul class="pagination" th:if="${courses.page.totalPages > 1}">
                <li class="page-item" th:classappend="${!courses.paging.isPrevEnabled()? 'disabled' : ''}">
                    <a class="page-link"
                       th:href="@{'/?pageNumber=' + ${courses.paging.pageNumber - 1} + '&courseName='+${courseName}+ '&duration='+${duration}+ '&capacity='+${capacity}  +'&topic='+${topic} + '&teacher='+${teacher}}"
                       tabindex="-1">Previous</a>
                </li>
                <th:block th:each="item : ${courses.paging.getItems()}">
                    <li class="page-item" th:classappend="${item.index == courses.paging.pageNumber? 'active' : ''}"
                        th:if="${item.pageItemType.name() == 'PAGE'}">
                        <a class="page-link"
                           th:href="@{'/?pageNumber=' + ${item.index} + '&courseName='+${courseName}+ '&duration='+${duration}+ '&capacity='+${capacity}  +'&topic='+${topic} + '&teacher='+${teacher}}"
                           th:text="${item.index}"></a>
                    </li>
                    <li class="page-item disabled" th:if="${item.pageItemType.name() == 'DOTS'}">
                        <a class="page-link" href="#">...</a>
                    </li>
                </th:block>
                <li class="page-item" th:classappend="${!courses.paging.isNextEnabled()? 'disabled' : ''}">
                    <a class="page-link"
                       th:href="@{'/?pageNumber=' + ${courses.paging.pageNumber + 1} + '&courseName='+${courseName}+ '&duration='+${duration}+ '&capacity='+${capacity}  +'&topic='+${topic} + '&teacher='+${teacher}}">Next</a>
                </li>
            </ul>
        </nav>
    </div>
</div>

<script>

    function setASC(){
        document.getElementById("ascl").classList.remove("btn-outline-primary");
        document.getElementById("ascl").classList.add("btn-primary");
        document.getElementById("descl").classList.remove("btn-danger");
        document.getElementById("descl").classList.add("btn-outline-danger");
    }

    function setDESC(){
        document.getElementById("ascl").classList.remove("btn-primary");
        document.getElementById("ascl").classList.add("btn-outline-primary");
        document.getElementById("descl").classList.remove("btn-outline-danger");
        document.getElementById("descl").classList.add("btn-danger");
    }

</script>

<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
<script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>

</body>
</html>